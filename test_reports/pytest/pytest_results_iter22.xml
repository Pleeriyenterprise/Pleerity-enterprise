<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="16" skipped="0" tests="22" time="5.317" timestamp="2026-01-21T15:55:56.614743+00:00" hostname="agent-env-4f563ee6-47e5-4625-a9ad-2646fab36986"><testcase classname="tests.test_iteration22_capability_completion.TestAuthentication" name="test_client_login" time="0.301"><failure message="AssertionError: No token in response&#10;assert 'token' in {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwb3J0YWxfdXNlcl9pZCI6IjM0NDJmYjRmLTljNmQtNGJiZi05Y2VmLTBlNzZlNmRkYjE2YiIsImNsaWVudF9pZCI6Ijg3ZmY2YzMzLTFmOTktNDBiNi1iOWVkLWEwNWMxN2UxMzk1MCIsImVtYWlsIjoidGVzdEBwbGVlcml0eS5jb20iLCJyb2xlIjoiUk9MRV9DTElFTlRfQURNSU4iLCJleHAiOjE3NjkwOTczNTZ9.Yp1n_cPe6rqvASfQbDmmgo5SqSqO_cWP2oNQrhw4fUk', 'token_type': 'bearer', 'user': {'client_id': '87ff6c33-1f99-40b6-b9ed-a05c17e13950', 'email': 'test@pleerity.com', 'portal_user_id': '3442fb4f-9c6d-4bbf-9cef-0e76e6ddb16b', 'role': 'ROLE_CLIENT_ADMIN'}}">tests/test_iteration22_capability_completion.py:39: in test_client_login
    assert "token" in data, "No token in response"
E   AssertionError: No token in response
E   assert 'token' in {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwb3J0YWxfdXNlcl9pZCI6IjM0NDJmYjRmLTljNmQtNGJiZi05Y2VmLTBlNzZlNmRkYjE2YiIsImNsaWVudF9pZCI6Ijg3ZmY2YzMzLTFmOTktNDBiNi1iOWVkLWEwNWMxN2UxMzk1MCIsImVtYWlsIjoidGVzdEBwbGVlcml0eS5jb20iLCJyb2xlIjoiUk9MRV9DTElFTlRfQURNSU4iLCJleHAiOjE3NjkwOTczNTZ9.Yp1n_cPe6rqvASfQbDmmgo5SqSqO_cWP2oNQrhw4fUk', 'token_type': 'bearer', 'user': {'client_id': '87ff6c33-1f99-40b6-b9ed-a05c17e13950', 'email': 'test@pleerity.com', 'portal_user_id': '3442fb4f-9c6d-4bbf-9cef-0e76e6ddb16b', 'role': 'ROLE_CLIENT_ADMIN'}}</failure></testcase><testcase classname="tests.test_iteration22_capability_completion.TestAuthentication" name="test_admin_login" time="0.262"><failure message="AssertionError: No token in response&#10;assert 'token' in {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwb3J0YWxfdXNlcl9pZCI6ImFkbWluLTAwMSIsImNsaWVudF9pZCI6bnVsbCwiZW1haWwiOiJhZG1pbkBwbGVlcml0eS5jb20iLCJyb2xlIjoiUk9MRV9BRE1JTiIsImV4cCI6MTc2OTA5NzM1N30.7VPsoTtklvBNkly2lbqlJhqZ_-Onjx3bqPDirOBbzyc', 'token_type': 'bearer', 'user': {'client_id': None, 'email': 'admin@pleerity.com', 'portal_user_id': 'admin-001', 'role': 'ROLE_ADMIN'}}">tests/test_iteration22_capability_completion.py:51: in test_admin_login
    assert "token" in data, "No token in response"
E   AssertionError: No token in response
E   assert 'token' in {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwb3J0YWxfdXNlcl9pZCI6ImFkbWluLTAwMSIsImNsaWVudF9pZCI6bnVsbCwiZW1haWwiOiJhZG1pbkBwbGVlcml0eS5jb20iLCJyb2xlIjoiUk9MRV9BRE1JTiIsImV4cCI6MTc2OTA5NzM1N30.7VPsoTtklvBNkly2lbqlJhqZ_-Onjx3bqPDirOBbzyc', 'token_type': 'bearer', 'user': {'client_id': None, 'email': 'admin@pleerity.com', 'portal_user_id': 'admin-001', 'role': 'ROLE_ADMIN'}}</failure></testcase><testcase classname="tests.test_iteration22_capability_completion.TestComplianceScoreTrending" name="test_get_score_trend_returns_sparkline_data" time="0.301"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Not authenticated&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_iteration22_capability_completion.py:89: in test_get_score_trend_returns_sparkline_data
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Not authenticated"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_iteration22_capability_completion.TestComplianceScoreTrending" name="test_score_trend_with_breakdown" time="0.299"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Not authenticated&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_iteration22_capability_completion.py:110: in test_score_trend_with_breakdown
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Not authenticated"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_iteration22_capability_completion.TestComplianceScoreTrending" name="test_score_trend_unauthorized" time="0.038" /><testcase classname="tests.test_iteration22_capability_completion.TestComplianceScoreSnapshot" name="test_create_snapshot" time="0.309"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Not authenticated&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_iteration22_capability_completion.py:138: in test_create_snapshot
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Not authenticated"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_iteration22_capability_completion.TestComplianceScoreSnapshot" name="test_snapshot_unauthorized" time="0.037" /><testcase classname="tests.test_iteration22_capability_completion.TestClientEntitlements" name="test_get_entitlements_returns_feature_matrix" time="0.387"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Not authenticated&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_iteration22_capability_completion.py:166: in test_get_entitlements_returns_feature_matrix
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Not authenticated"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_iteration22_capability_completion.TestClientEntitlements" name="test_entitlements_unauthorized" time="0.035" /><testcase classname="tests.test_iteration22_capability_completion.TestAdminFeatureMatrix" name="test_get_feature_matrix" time="0.303"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Not authenticated&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_iteration22_capability_completion.py:214: in test_get_feature_matrix
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Not authenticated"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_iteration22_capability_completion.TestAdminFeatureMatrix" name="test_feature_matrix_requires_admin" time="0.299"><failure message="AssertionError: Expected 403, got 401&#10;assert 401 == 403&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_iteration22_capability_completion.py:250: in test_feature_matrix_requires_admin
    assert response.status_code == 403, f"Expected 403, got {response.status_code}"
E   AssertionError: Expected 403, got 401
E   assert 401 == 403
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_iteration22_capability_completion.TestCalendarExport" name="test_ical_export_plan_gated_for_plan_1" time="0.305"><failure message="AssertionError: Expected 403 for PLAN_1, got 401&#10;assert 401 == 403&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_iteration22_capability_completion.py:266: in test_ical_export_plan_gated_for_plan_1
    assert response.status_code == 403, f"Expected 403 for PLAN_1, got {response.status_code}"
E   AssertionError: Expected 403 for PLAN_1, got 401
E   assert 401 == 403
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_iteration22_capability_completion.TestCalendarExport" name="test_ical_export_unauthorized" time="0.042" /><testcase classname="tests.test_iteration22_capability_completion.TestBrandingSettings" name="test_get_branding_returns_settings_with_upgrade_message" time="0.296"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Not authenticated&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_iteration22_capability_completion.py:294: in test_get_branding_returns_settings_with_upgrade_message
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Not authenticated"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_iteration22_capability_completion.TestBrandingSettings" name="test_put_branding_rejected_for_plan_1" time="0.337"><failure message="AssertionError: Expected 403 for PLAN_1, got 401&#10;assert 401 == 403&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_iteration22_capability_completion.py:326: in test_put_branding_rejected_for_plan_1
    assert response.status_code == 403, f"Expected 403 for PLAN_1, got {response.status_code}"
E   AssertionError: Expected 403 for PLAN_1, got 401
E   assert 401 == 403
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_iteration22_capability_completion.TestBrandingSettings" name="test_branding_unauthorized" time="0.036" /><testcase classname="tests.test_iteration22_capability_completion.TestProfessionalPDFReport" name="test_professional_pdf_plan_gated_for_plan_1" time="0.301"><failure message="AssertionError: Expected 403 for PLAN_1, got 401&#10;assert 401 == 403&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_iteration22_capability_completion.py:356: in test_professional_pdf_plan_gated_for_plan_1
    assert response.status_code == 403, f"Expected 403 for PLAN_1, got {response.status_code}"
E   AssertionError: Expected 403 for PLAN_1, got 401
E   assert 401 == 403
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_iteration22_capability_completion.TestProfessionalPDFReport" name="test_professional_pdf_unauthorized" time="0.041" /><testcase classname="tests.test_iteration22_capability_completion.TestScoreExplanation" name="test_get_score_explanation" time="0.309"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Not authenticated&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_iteration22_capability_completion.py:384: in test_get_score_explanation
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Not authenticated"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_iteration22_capability_completion.TestCalendarExpiries" name="test_get_calendar_expiries" time="0.297"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Not authenticated&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_iteration22_capability_completion.py:405: in test_get_calendar_expiries
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Not authenticated"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_iteration22_capability_completion.TestCalendarExpiries" name="test_get_upcoming_expiries" time="0.295"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Not authenticated&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_iteration22_capability_completion.py:422: in test_get_upcoming_expiries
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Not authenticated"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase><testcase classname="tests.test_iteration22_capability_completion.TestPlanFeatures" name="test_get_plan_features" time="0.320"><failure message="AssertionError: Failed: {&quot;detail&quot;:&quot;Not authenticated&quot;}&#10;assert 401 == 200&#10; +  where 401 = &lt;Response [401]&gt;.status_code">tests/test_iteration22_capability_completion.py:443: in test_get_plan_features
    assert response.status_code == 200, f"Failed: {response.text}"
E   AssertionError: Failed: {"detail":"Not authenticated"}
E   assert 401 == 200
E    +  where 401 = &lt;Response [401]&gt;.status_code</failure></testcase></testsuite></testsuites>